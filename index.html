<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brick 1100 Apps</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
    <style>
        .container {
            padding: 4rem 2rem;
        }

        ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            text-align: center;
        }

        iframe {
            --height: 400px;
            height: var(--height);
            width: calc(var(--height) * 32 / 72);
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Brick 1100 Apps</h1>
        <ul id="list"></ul>
    </div>

    <script src="https://unpkg.com/mithril/mithril.js"></script>
    <script>
        const list = document.getElementById("list");
        const gameUrl = "https://brick1100-apps.visnalize.com";
        const previewerUrl = "https://brick1100.visnalize.com/#/online/previewer";

        fetch("https://api.github.com/repos/Visnalize/brick-1100-apps/contents")
            .then((response) => response.json())
            .then((data) => {
                const items = data
                    .filter((item) => item.type === "dir")
                    .map((item) => {
                        const name = item.name
                            .split("-")
                            .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
                            .join(" ");
                        const iframe = m("iframe", {
                            src: `${previewerUrl}?url=${gameUrl}/${item.name}`,
                            frameborder: "0",
                        });
                        return m("li", [
                            m("a", {
                                href: `${gameUrl}/${item.name}`,
                                target: "_blank",
                            }, m("h2", name)),
                            iframe,
                        ]);
                    });
                m.render(list, items);
            });
    </script>
</body>

</html>